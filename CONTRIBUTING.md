# 貢献ガイドライン

## 🚨 AI開発者向け重要ルール

**コード変更を行う前に、必ず以下のファイルを参照してください：**

### 📋 必須参照ファイル
1. **[AI_REFERENCE_GUIDE.md](./AI_REFERENCE_GUIDE.md)** - AI開発者向け参照ガイド
2. **[技術仕様書_関数・ファイルパス一覧.md](./技術仕様書_関数・ファイルパス一覧.md)** - 技術仕様書（最重要）
3. **[ToDoリスト.md](./ToDoリスト.md)** - 進捗管理・タスク一覧

### ⚠️ 重要
- これらのファイルを参照せずにコードを変更すると、予期しないバグや不具合が発生する可能性があります
- 変更後は必要に応じて技術仕様書とToDoリストを更新してください

---

## 🔧 開発環境のセットアップ

### 1. 依存関係のインストール
```bash
python -m venv venv
source venv/bin/activate  # Linux/Mac
# または
venv\Scripts\activate     # Windows
pip install -r requirements.txt
```

### 2. 開発用ツールのインストール
```bash
pip install black ruff mypy pytest pytest-cov
```

---

## 📝 コード変更の手順

### Step 1: 技術仕様書の確認
```bash
# 必ず最初に技術仕様書を確認
cat 技術仕様書_関数・ファイルパス一覧.md
```

### Step 2: 変更対象の特定
- 変更する関数・クラス名を仕様書で確認
- ファイルパスが正しいことを確認
- 依存関係を把握

### Step 3: 変更の実行
- 仕様書に記載されている構造に従って変更
- 既存の関数シグネチャを維持
- ファイルパスは絶対パスを使用

### Step 4: テストの実行
```bash
# 型チェック
mypy modules/

# コードフォーマット
black .

# リンター
ruff check .

# テスト実行
pytest --cov=modules
```

### Step 5: ドキュメントの更新
- 必要に応じて技術仕様書を更新
- ToDoリストを更新

---

## 🧪 テスト

### テストの実行
```bash
# 全テスト実行
pytest

# カバレッジ付きテスト実行
pytest --cov=modules --cov-report=html

# 特定のテストファイル実行
pytest tests/test_tag_manager.py
```

### テストカバレッジ
- 目標: 70%以上
- 現在: 70%（136件成功・34件スキップ・0件失敗）

---

## 🔍 コード品質チェック

### 型チェック（mypy）
```bash
mypy modules/
```

### コードフォーマット（Black）
```bash
# フォーマット実行
black .

# フォーマットチェック
black --check .
```

### リンター（Ruff）
```bash
# チェック実行
ruff check .

# 自動修正
ruff check . --fix
```

---

## 📚 ドキュメント

### 重要なドキュメント
- `README.md` - プロジェクト概要・使用方法
- `AI_REFERENCE_GUIDE.md` - AI開発者向け参照ガイド
- `技術仕様書_関数・ファイルパス一覧.md` - 技術仕様書
- `ToDoリスト.md` - 進捗管理・タスク一覧
- `CONTRIBUTING.md` - このファイル

### ドキュメント更新ルール
- 新しい機能追加時は技術仕様書を更新
- バグ修正時はToDoリストを更新
- API変更時はREADME.mdを更新

---

## 🐛 バグ報告

### バグ報告時の必須情報
1. **環境情報**
   - OS: Windows/Linux/Mac
   - Python バージョン
   - 依存関係バージョン

2. **再現手順**
   - 具体的な操作手順
   - 期待される動作
   - 実際の動作

3. **エラー情報**
   - エラーメッセージ
   - ログファイル（`logs/`配下）
   - スクリーンショット（可能であれば）

### バグ報告先
- GitHub Issues
- または、プロジェクト管理者に直接連絡

---

## ✨ 新機能提案

### 提案時の必須情報
1. **機能概要**
   - 何を実現したいか
   - なぜ必要か
   - どのようなユーザーが使うか

2. **技術的考慮事項**
   - 実装方法の提案
   - 既存機能への影響
   - パフォーマンスへの影響

3. **UI/UX の提案**
   - 画面設計の案
   - ユーザーフロー
   - アクセシビリティ

---

## 🔄 プルリクエスト

### プルリクエスト作成時のチェックリスト
- [ ] 技術仕様書を参照した
- [ ] 変更対象の関数・クラスを特定した
- [ ] ファイルパスが正しいことを確認した
- [ ] 依存関係を把握した
- [ ] 既存の構造に従って変更した
- [ ] テストが通ることを確認した
- [ ] 型チェックが通ることを確認した
- [ ] コードフォーマットが適用されている
- [ ] リンターが通ることを確認した
- [ ] 必要に応じて技術仕様書を更新した
- [ ] ToDoリストを更新した

### レビュー観点
- コードの可読性
- テストの充実度
- 型安全性
- 例外処理
- パフォーマンス
- セキュリティ

---

## 📞 サポート

### 質問・相談先
- GitHub Issues
- プロジェクト管理者

### 参考資料
- [Python公式ドキュメント](https://docs.python.org/)
- [Tkinter公式ドキュメント](https://docs.python.org/ja/3/library/tkinter.html)
- [ttkbootstrap公式ドキュメント](https://ttkbootstrap.readthedocs.io/)

---

**このガイドラインに従って開発することで、プロジェクトの品質と保守性を維持できます。** 